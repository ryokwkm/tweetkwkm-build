(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{130:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(22),i=n.n(o),s=n(142),l=n(68),c=n(80),u=n(30),d=n(23),h=n(24),m=n(28),f=n(25),p=n(29),v=n(56),b=n.n(v),g=n(69),y=n(77),I=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(m.a)(this,Object(f.a)(t).call(this,e))).state={startIndex:n.props.startIndex},n}return Object(p.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return a.a.createElement("div",null,this.props.startIndex)}}]),t}(a.a.Component),x=n(62),R=n(70),_=n(73),S=n(71),j=n(72);var w=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},O=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),E=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t},k=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(l){a=!0,o=l}finally{try{!r&&s.return&&s.return()}finally{if(a)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),C=function(e){function t(){var e,n,r;w(this,t);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return n=r=E(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r._lastRenderedStartIndex=-1,r._lastRenderedStopIndex=-1,r._memoizedUnloadedRanges=[],r._onItemsRendered=function(e){var t=e.visibleStartIndex,n=e.visibleStopIndex;r._lastRenderedStartIndex=t,r._lastRenderedStopIndex=n,r.props.onScrollHandler(t,n),r._ensureRowsLoaded(t,n)},r._setRef=function(e){r._listRef=e},E(r,n)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,j["PureComponent"]),O(t,[{key:"resetloadMoreItemsCache",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._memoizedUnloadedRanges=[],e&&this._ensureRowsLoaded(this._lastRenderedStartIndex,this._lastRenderedStopIndex)}},{key:"componentDidMount",value:function(){0}},{key:"render",value:function(){return(0,this.props.children)({onItemsRendered:this._onItemsRendered,ref:this._setRef})}},{key:"_ensureRowsLoaded",value:function(e,t){var n=this.props,r=n.isItemLoaded,a=n.itemCount,o=n.minimumBatchSize,i=void 0===o?10:o,s=n.threshold,l=void 0===s?15:s,c=function(e){for(var t=e.isItemLoaded,n=e.itemCount,r=e.minimumBatchSize,a=e.startIndex,o=e.stopIndex,i=[],s=null,l=null,c=a;c<=o;c++)t(c)?null!==l&&(i.push([s,l]),s=l=null):(l=c,null===s&&(s=c));if(null!==l){for(var u=Math.min(Math.max(l,s+r-1),n-1),d=l+1;d<=u&&!t(d);d++)l=d;i.push([s,l])}if(i.length)for(var h=i[0];h[1]-h[0]+1<r&&h[0]>0;){var m=h[0]-1;if(t(m))break;h[0]=m}return i}({isItemLoaded:r,itemCount:a,minimumBatchSize:i,startIndex:Math.max(0,e-l),stopIndex:Math.min(a-1,t+l)});(this._memoizedUnloadedRanges.length!==c.length||this._memoizedUnloadedRanges.find(function(e,t){var n=k(e,2),r=n[0],a=n[1];return c[t][0]!==r||c[t][1]!==a}))&&(this._memoizedUnloadedRanges=c,this._loadUnloadedRanges(c))}},{key:"_loadUnloadedRanges",value:function(e){var t=this,n=this.props.loadMoreItems||this.props.loadMoreRows;e.forEach(function(e){var r=k(e,2),a=r[0],o=r[1],i=n(a,o);null!=i&&i.then(function(){if(function(e){var t=e.lastRenderedStartIndex,n=e.lastRenderedStopIndex,r=e.startIndex,a=e.stopIndex;return!(r>n||a<t)}({lastRenderedStartIndex:t._lastRenderedStartIndex,lastRenderedStopIndex:t._lastRenderedStopIndex,startIndex:a,stopIndex:o})){if(null==t._listRef)return;"function"===typeof t._listRef.resetAfterIndex?t._listRef.resetAfterIndex(a,!0):("function"===typeof t._listRef._getItemStyleCache&&t._listRef._getItemStyleCache(-1),t._listRef.forceUpdate())}})})}}]),t}(),L=n(140),M=n(141);function z(){var e=Object(R.a)(["\n  position: relative;\n  width: 100px;\n"]);return z=function(){return e},e}var P=_.a.div(z()),A=function(e){var t=e.items,n=(e.moreItemsLoading,e.hasNextPage),r=e.loadMoreItems,o=e.handleScroll,i=function(e){var n=e.index,r=e.style;return e.ref,n>=t.length?a.a.createElement(P,{style:Object(x.a)({},r,{backgroundColor:"grey"})}):a.a.createElement(L.a,{style:Object(x.a)({},r,{height:"50px"})},a.a.createElement(M.a,{primary:t[n].head,secondary:t[n].body}))},s=n?t.length+1:t.length;return a.a.createElement(C,{isItemLoaded:function(e){return e<t.length-1},itemCount:s,loadMoreItems:r,onScrollHandler:o},function(e){var t=e.onItemsRendered,n=e.ref;return a.a.createElement(S.a,{height:300,width:"100%",itemCount:s,itemSize:100,onItemsRendered:t,ref:n},i)})},U={PRD:"https://1faddlfvx4.execute-api.ap-northeast-1.amazonaws.com/prod/trends",DEV:"http://ts.2chx.net/Api/get"};function D(e){var t=U["3001"===window.location.port?"DEV":"PRD"];return e?t+"/"+e:t}var B=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(m.a)(this,Object(f.a)(t).call(this,e))).handleScroll=function(e){console.log(e),n.setState({startIndex:e})},n.state={items:[],moreItemsLoading:!1,page:0,startIndex:0},n}return Object(p.a)(t,e),Object(h.a)(t,[{key:"loadMoreItems",value:function(){var e=Object(g.a)(b.a.mark(function e(t,n){var r,a,o;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(23,console.log("Loading...",this.state.items.length,t),!(this.state.page>=23)){e.next=4;break}return e.abrupt("return");case 4:return this.setState({moreItemsLoading:!0}),e.next=7,fetch(D("?beforeDay=2&country="+this.state.page));case 7:return r=e.sent,e.next=10,r.json();case 10:a=e.sent,o=[],a.forEach(function(e){var t=Object.assign({},e.reactions);if(e.reactions=null,o.push(e),t)for(var n in t)o.push(t[n])}),this.setState({moreItemsLoading:!1,page:this.state.page+1,items:this.state.items.concat(o)});case 14:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.classes;return a.a.createElement("div",{className:e.root},a.a.createElement(I,{startIndex:this.state.startIndex}),a.a.createElement("br",null),a.a.createElement(A,{items:this.state.items,hasNextPage:!0,moreItemsLoading:this.state.moreItemsLoading,loadMoreItems:this.loadMoreItems.bind(this),handleScroll:this.handleScroll.bind(this)}))}}]),t}(a.a.Component),H=Object(y.withStyles)(function(e){return{root:{width:"100%",height:400,backgroundColor:e.palette.background.paper},listSection:{backgroundColor:"inherit"},ul:{backgroundColor:"inherit",padding:0}}})(B),N=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(m.a)(this,Object(f.a)(t).call(this,e))).state={offset:0,currentPosition:0},n}return Object(p.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return a.a.createElement("div",null,a.a.createElement(H,{monsters:this.props.monsters}))}}]),t}(a.a.Component),T=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(m.a)(this,Object(f.a)(t).call(this,e))).state={isLoaded:!1,error:null,items:[]},n}return Object(p.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch(D("?country=13")).then(function(e){return e.json()}).then(function(t){e.setState({isLoaded:!0,items:t})},function(t){e.setState({isLoaded:!0,error:t})})}},{key:"render",value:function(){return a.a.createElement(N,{monsters:this.state.items})}}]),t}(a.a.Component),W=function(){return a.a.createElement("div",null,a.a.createElement("h2",null,"Home"),a.a.createElement("p",null,"Welcome to \u3088\u3046\u3053\u305d"))},J=function(){return a.a.createElement("div",null,a.a.createElement("h2",null,"About"),a.a.createElement("p",null,"\u30d5\u30ec\u30f3\u30ba\u306b\u6295\u7968\u3059\u308b\u30da\u30fc\u30b8\u3067\u3059"))},V=function(){return a.a.createElement(c.a,null,a.a.createElement("div",null,a.a.createElement(u.a,{exact:!0,path:"/",component:T}),a.a.createElement(u.a,{path:"/about",component:J}),a.a.createElement(u.a,{path:"/home",component:W})))},q=n(46),$=n(82),F=Object($.a)({palette:{primary:{main:"#556cd6"},secondary:{main:"#19857b"},error:{main:q.a.A400},background:{default:"#fff"}}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(a.a.createElement(l.a,{theme:F},a.a.createElement(s.a,null),a.a.createElement(V,null)),document.querySelector("#root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},86:function(e,t,n){e.exports=n(130)}},[[86,1,2]]]);
//# sourceMappingURL=main.227412c7.chunk.js.map