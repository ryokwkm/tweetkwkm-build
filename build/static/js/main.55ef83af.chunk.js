(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{139:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(21),i=n.n(o),s=n(150),c=n(70),l=n(90),u=n(30),d=n(23),h=n(24),m=n(28),f=n(25),p=n(29),v=n(61),b=n.n(v),g=n(77),y=n(89),I=n(19),x=n(78),w=n.n(x),R=n(82),_=n.n(R),E=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(m.a)(this,Object(f.a)(t).call(this,e))).state={startIndex:n.props.startIndex},n}return Object(p.a)(t,e),Object(h.a)(t,[{key:"getArticleById",value:function(e){var t,n=this.props.parents;return console.log("check",e,n,typeof e),n&&n.forEach(function(n){n.id===e&&(t=n)}),t}},{key:"render",value:function(){var e=this.props.classes,t="",n="",r=this.props.items[this.props.startIndex];if(r){var o=r.parent_id;0===Number(o)&&(o=r.id);var i=this.getArticleById(o);i&&(t=i.head,n=i.body)}return a.a.createElement(w.a,{className:e.articleHeader},a.a.createElement(_.a,{primary:t,secondary:n}))}}]),t}(a.a.Component),j=Object(I.a)(function(e){return{articleHeader:{width:"100%",height:50}}})(E),O=n(67),S=n(83),k=n(86),L=n(84),C=n(85);var M=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},A=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),P=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t},z=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(c){a=!0,o=c}finally{try{!r&&s.return&&s.return()}finally{if(a)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),H=function(e){function t(){var e,n,r;M(this,t);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return n=r=P(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r._lastRenderedStartIndex=-1,r._lastRenderedStopIndex=-1,r._memoizedUnloadedRanges=[],r._onItemsRendered=function(e){var t=e.visibleStartIndex,n=e.visibleStopIndex;r._lastRenderedStartIndex=t,r._lastRenderedStopIndex=n,r.props.onScrollHandler(t,n),r._ensureRowsLoaded(t,n)},r._setRef=function(e){r._listRef=e},P(r,n)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,C["PureComponent"]),A(t,[{key:"resetloadMoreItemsCache",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._memoizedUnloadedRanges=[],e&&this._ensureRowsLoaded(this._lastRenderedStartIndex,this._lastRenderedStopIndex)}},{key:"componentDidMount",value:function(){0}},{key:"render",value:function(){return(0,this.props.children)({onItemsRendered:this._onItemsRendered,ref:this._setRef})}},{key:"_ensureRowsLoaded",value:function(e,t){var n=this.props,r=n.isItemLoaded,a=n.itemCount,o=n.minimumBatchSize,i=void 0===o?10:o,s=n.threshold,c=void 0===s?15:s,l=function(e){for(var t=e.isItemLoaded,n=e.itemCount,r=e.minimumBatchSize,a=e.startIndex,o=e.stopIndex,i=[],s=null,c=null,l=a;l<=o;l++)t(l)?null!==c&&(i.push([s,c]),s=c=null):(c=l,null===s&&(s=l));if(null!==c){for(var u=Math.min(Math.max(c,s+r-1),n-1),d=c+1;d<=u&&!t(d);d++)c=d;i.push([s,c])}if(i.length)for(var h=i[0];h[1]-h[0]+1<r&&h[0]>0;){var m=h[0]-1;if(t(m))break;h[0]=m}return i}({isItemLoaded:r,itemCount:a,minimumBatchSize:i,startIndex:Math.max(0,e-c),stopIndex:Math.min(a-1,t+c)});(this._memoizedUnloadedRanges.length!==l.length||this._memoizedUnloadedRanges.find(function(e,t){var n=z(e,2),r=n[0],a=n[1];return l[t][0]!==r||l[t][1]!==a}))&&(this._memoizedUnloadedRanges=l,this._loadUnloadedRanges(l))}},{key:"_loadUnloadedRanges",value:function(e){var t=this,n=this.props.loadMoreItems||this.props.loadMoreRows;e.forEach(function(e){var r=z(e,2),a=r[0],o=r[1],i=n(a,o);null!=i&&i.then(function(){if(function(e){var t=e.lastRenderedStartIndex,n=e.lastRenderedStopIndex,r=e.startIndex,a=e.stopIndex;return!(r>n||a<t)}({lastRenderedStartIndex:t._lastRenderedStartIndex,lastRenderedStopIndex:t._lastRenderedStopIndex,startIndex:a,stopIndex:o})){if(null==t._listRef)return;"function"===typeof t._listRef.resetAfterIndex?t._listRef.resetAfterIndex(a,!0):("function"===typeof t._listRef._getItemStyleCache&&t._listRef._getItemStyleCache(-1),t._listRef.forceUpdate())}})})}}]),t}(),U=n(148),B=n(149);function D(){var e=Object(S.a)(["\n  position: relative;\n  width: 100px;\n"]);return D=function(){return e},e}var N=function(e){return{infinateList:{width:"100%",marginTop:50}}},W=k.a.div(D()),T=function(e){var t=e.items,n=(e.moreItemsLoading,e.hasNextPage),r=e.loadMoreItems,o=e.handleScroll,i=function(e){var n=e.index,r=e.style;return e.ref,n>=t.length?a.a.createElement(W,{style:Object(O.a)({},r,{backgroundColor:"grey"})}):a.a.createElement(U.a,{style:Object(O.a)({},r,{height:"50px"})},a.a.createElement(B.a,{secondary:t[n].body}))},s=n?t.length+1:t.length;return a.a.createElement(H,{className:N.infinateList,isItemLoaded:function(e){return e<t.length-1},itemCount:s,loadMoreItems:r,onScrollHandler:o},function(e){var t=e.onItemsRendered,n=e.ref,r=function(){var e=window,t=document,n=t.documentElement,r=t.getElementsByTagName("body")[0];return{width:e.innerWidth||n.clientWidth||r.clientWidth,height:e.innerHeight||n.clientHeight||r.clientHeight}}().height-50;return a.a.createElement(L.a,{height:r,width:"100%",itemCount:s,itemSize:100,onItemsRendered:t,ref:n},i)})},J={PRD:"http://ts.2chx.net/Api/get",DEV:"http://ts.2chx.net/Api/get"};function V(e){var t=J["3001"===window.location.port?"DEV":"PRD"];return e?t+"/"+e:t}var q=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(m.a)(this,Object(f.a)(t).call(this,e))).handleScroll=function(e){n.setState({startIndex:e})},n.state={items:[],parents:[],moreItemsLoading:!1,page:0,startIndex:0},n}return Object(p.a)(t,e),Object(h.a)(t,[{key:"loadMoreItems",value:function(){var e=Object(g.a)(b.a.mark(function e(t,n){var r,a,o,i;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(23,console.log("Loading...",this.state.items.length,t),!(this.state.page>=23)){e.next=4;break}return e.abrupt("return");case 4:return this.setState({moreItemsLoading:!0}),e.next=7,fetch(V("?beforeDay=2&country="+this.state.page));case 7:return r=e.sent,e.next=10,r.json();case 10:a=e.sent,o=[],i=[],a.forEach(function(e){var t=Object.assign({},e.reactions);if(e.reactions=null,o.push(e),i.push(e),t)for(var n in t)o.push(t[n])}),console.log(o),this.setState({moreItemsLoading:!1,page:this.state.page+1,items:this.state.items.concat(o),parents:this.state.parents.concat(i)});case 16:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.classes;return a.a.createElement("div",{className:e.root},a.a.createElement(j,{startIndex:this.state.startIndex,parents:this.state.parents,items:this.state.items}),a.a.createElement(T,{items:this.state.items,hasNextPage:!0,moreItemsLoading:this.state.moreItemsLoading,loadMoreItems:this.loadMoreItems.bind(this),handleScroll:this.handleScroll.bind(this)}))}}]),t}(a.a.Component),$=Object(y.withStyles)(function(e){return{root:{width:"100%",height:"100%",backgroundColor:e.palette.background.paper},listSection:{backgroundColor:"inherit"},ul:{backgroundColor:"inherit",padding:0}}})(q),F=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(m.a)(this,Object(f.a)(t).call(this,e))).state={offset:0,currentPosition:0},n}return Object(p.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return a.a.createElement("div",null,a.a.createElement($,{monsters:this.props.monsters}))}}]),t}(a.a.Component),G=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(m.a)(this,Object(f.a)(t).call(this,e))).state={isLoaded:!1,error:null,items:[]},n}return Object(p.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch(V("?country=13")).then(function(e){return e.json()}).then(function(t){e.setState({isLoaded:!0,items:t})},function(t){e.setState({isLoaded:!0,error:t})})}},{key:"render",value:function(){return a.a.createElement(F,{monsters:this.state.items})}}]),t}(a.a.Component),K=function(){return a.a.createElement("div",null,a.a.createElement("h2",null,"Home"),a.a.createElement("p",null,"Welcome to \u3088\u3046\u3053\u305d"))},Q=function(){return a.a.createElement("div",null,a.a.createElement("h2",null,"About"),a.a.createElement("p",null,"\u30d5\u30ec\u30f3\u30ba\u306b\u6295\u7968\u3059\u308b\u30da\u30fc\u30b8\u3067\u3059"))},X=function(){return a.a.createElement(l.a,null,a.a.createElement("div",null,a.a.createElement(u.a,{exact:!0,path:"/",component:G}),a.a.createElement(u.a,{path:"/about",component:Q}),a.a.createElement(u.a,{path:"/home",component:K})))},Y=n(48),Z=n(92),ee=Object(Z.a)({palette:{primary:{main:"#556cd6"},secondary:{main:"#19857b"},error:{main:Y.a.A400},background:{default:"#fff"}}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(a.a.createElement(c.a,{theme:ee},a.a.createElement(s.a,null),a.a.createElement(X,null)),document.querySelector("#root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},96:function(e,t,n){e.exports=n(139)}},[[96,1,2]]]);
//# sourceMappingURL=main.55ef83af.chunk.js.map